# دليل بناء وتثبيت تطبيق الأندرويد

هذا الدليل يوضح خطوات بناء ملف APK لتطبيق سوق وتثبيته على جهاز أندرويد.

## متطلبات مسبقة

قبل البدء، تأكد من تثبيت البرامج التالية:

1. Node.js (الإصدار 14 أو أحدث)
2. npm (الإصدار 6 أو أحدث)
3. Android Studio (أحدث إصدار)
4. JDK (Java Development Kit) الإصدار 11 أو أحدث

## خطوات بناء ملف APK

### 1. تثبيت الاعتماديات

```bash
cd c:\wamp64\www\marketplace\mobile-app
npm install
```

### 2. إضافة منصة الأندرويد للمشروع

```bash
npm run android
```

هذا الأمر سيقوم بإضافة منصة الأندرويد ونسخ ملفات المشروع إليها.

### 3. بناء ملف APK

```bash
npm run build:android
```

هذا الأمر سيقوم ببناء ملف APK للتطبيق. بعد اكتمال العملية، ستجد ملف APK في المسار التالي:

```
c:\wamp64\www\marketplace\mobile-app\android\app\build\outputs\apk\debug\app-debug.apk
```

## تثبيت التطبيق على جهاز أندرويد

### الطريقة 1: باستخدام كابل USB

1. قم بتوصيل جهاز الأندرويد بالكمبيوتر باستخدام كابل USB.
2. تأكد من تفعيل "وضع المطور" و "تصحيح USB" على جهاز الأندرويد.
3. انسخ ملف APK إلى جهاز الأندرويد.
4. افتح مدير الملفات على جهاز الأندرويد وانتقل إلى المجلد الذي نسخت إليه ملف APK.
5. اضغط على ملف APK لتثبيته.
6. إذا ظهرت رسالة تحذير، اضغط على "إعدادات" ثم فعّل خيار "السماح بتثبيت التطبيقات من هذا المصدر".

### الطريقة 2: باستخدام Android Studio

1. افتح مشروع الأندرويد في Android Studio:
```bash
npm run open:android
```
2. قم بتوصيل جهاز الأندرويد بالكمبيوتر.
3. اختر جهازك من قائمة الأجهزة المتاحة.
4. اضغط على زر "Run" (تشغيل) لتثبيت التطبيق مباشرة على الجهاز.

### الطريقة 3: مشاركة ملف APK

1. انسخ ملف APK إلى Google Drive أو أي خدمة تخزين سحابي أخرى.
2. شارك الرابط مع المستخدمين.
3. يمكن للمستخدمين تنزيل الملف وتثبيته على أجهزتهم.

## ملاحظات هامة

- تأكد من تفعيل "تثبيت من مصادر غير معروفة" في إعدادات الأمان على جهاز الأندرويد.
- هذا الإصدار هو إصدار تجريبي (Debug) وليس إصدار إنتاج (Release). لإنشاء إصدار إنتاج، ستحتاج إلى إنشاء مفتاح توقيع (Signing Key) واتباع خطوات إضافية.
- لاختبار التطبيق على جهاز حقيقي، تأكد من تغيير عنوان API في ملف `src/services/api.ts` إلى عنوان IP الخاص بالخادم المحلي أو عنوان خادم الإنتاج.

## حل المشكلات الشائعة

### المشكلة: فشل في تثبيت التطبيق
- تأكد من تفعيل "تثبيت من مصادر غير معروفة" في إعدادات الأمان.
- تأكد من وجود مساحة كافية على جهاز الأندرويد.

### المشكلة: التطبيق يتوقف بعد التشغيل
- تأكد من أن خادم API يعمل ويمكن الوصول إليه من جهاز الأندرويد.
- تحقق من صحة عنوان API في ملف `src/services/api.ts`.

### المشكلة: فشل في بناء ملف APK
- تأكد من تثبيت JDK بشكل صحيح وإضافته إلى متغيرات النظام.
- تأكد من تثبيت Android SDK بشكل صحيح.
- حاول تنظيف المشروع وإعادة البناء:
```bash
cd android
./gradlew clean
cd ..
npm run build:android
```
